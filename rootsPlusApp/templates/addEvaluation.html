{% extends 'base.html' %}
{% block title %}Add Evaluation{% endblock %}

{% block content %}
<div class="container py-4">

    <h4 class="mb-4">Add Evaluation for <span class="text-success">{{ farm.name }}</span></h4>

    <!-- Django Messages -->
    {% if messages %}
            {% for message in messages %}
            <div
              class="w-75 alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show mb-3"
              role="alert">
              <i class="bi bi-info-circle me-2"></i> {{ message }}
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>

            {% endfor %}
            {% endif %}
    <!-- End Django Messages --> 

    <form method="post" class="card shadow-sm p-4">
        {% csrf_token %}
        <div class="row g-3">
            <div class="col-md-4">
                <label class="form-label">Season</label>
                <input required type="text" name="season" class="form-control" placeholder="e.g. Spring 2025 or Autumn 2024">
            </div>
            <div class="col-md-4">
                <label class="form-label">Yield Amount (tons)</label>
                <input required type="number" step="0.01" name="yield_amount" class="form-control"
                    value="{{ yield_amount|default:'' }}">
            </div>
            <div class="col-md-4">
                <label class="form-label">Crops Count</label>
                <input required type="number" name="crops_count" class="form-control" value="{{ crops_count|default:'' }}">
            </div>
            <div class="col-md-4">
                <label class="form-label">Avg Yield per Dunum</label>
                <input required type="number" step="0.01" name="average_yield_per_dunum" class="form-control"
                    value="{{ average_yield_per_dunum|default:'' }}">
            </div>
            <div class="col-md-4">
                <label class="form-label">Activity Score</label>
                <input required type="number" step="0.01" name="activity_score" class="form-control"
                    placeholder="0 = poor activity, 10 = excellent">
            </div>

            <div class="col-md-4">
                <label class="form-label">Cost Efficiency</label>
                <input required type="number" step="0.01" name="cost_efficiency" class="form-control"
                    placeholder="0 = high cost, 10 = very efficient">
            </div>

            <div class="col-md-4">
                <label class="form-label">Total Cost</label>
                <input required type="number" step="0.01" name="total_cost" class="form-control"
                    placeholder="Enter total cost in NIS or USD ">
            </div>

            <div class="col-md-4">
                <label class="form-label">Overall Score</label>
                <input required type="number" step="0.01" name="overall_score" class="form-control"
                    placeholder="0 = weak season, 10 = excellent season">
            </div>

            <div class="col-12">
                <label class="form-label">Recommendations</label>
                <textarea name="recommendations" rows="3" class="form-control"
                    placeholder="Write suggestions for improvement or next steps"></textarea>
            </div>
        </div>

        <div class="mt-4">
            <button type="submit" class="btn btn-success">
                <i class="bi bi-save me-1"></i> Save Evaluation
            </button>
            <a href="{% url 'rootsPlusApp:evaluations_list' farm.id %}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}